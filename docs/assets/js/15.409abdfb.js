(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{472:function(e,t,r){"use strict";r.r(t);var s=r(25),a=Object(s.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"throttling-guidance"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#throttling-guidance"}},[e._v("#")]),e._v(" Throttling Guidance")]),e._v(" "),r("blockquote",[r("p",[e._v("Throttling limits the number of concurrent calls to a service to prevent overuse of resources. Graphshield is designed to handle a high volume of requests. If an overwhelming number of requests occurs, throttling helps maintain optimal performance and reliability of the service.")])]),e._v(" "),r("h2",{attrs:{id:"common-throttling-scenarios"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#common-throttling-scenarios"}},[e._v("#")]),e._v(" Common Throttling Scenarios")]),e._v(" "),r("p",[e._v("The most common causes of throttling of clients include:")]),e._v(" "),r("ul",[r("li",[e._v("A large number of requests across all applications in a our environments.")]),e._v(" "),r("li",[e._v("A large number of requests from a particular application across all environments.")])]),e._v(" "),r("h2",{attrs:{id:"what-happens-when-throttling-occurs"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#what-happens-when-throttling-occurs"}},[e._v("#")]),e._v(" What Happens when Throttling Occurs?")]),e._v(" "),r("p",[e._v("When a throttling threshold is exceeded, GraphShield limits any further requests from that client for a period of time. When throttling occurs, GraphShield returns HTTP status code 429 (Too many requests), and the requests fail. A suggested wait time is returned in the response header of the failed request.")]),e._v(" "),r("p",[e._v("GraphShield is conforming to the "),r("a",{attrs:{href:"https://tools.ietf.org/id/draft-polli-ratelimit-headers-01.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("IETF ratelimit standardization proposal"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h2",{attrs:{id:"best-practices-to-avoid-throttling"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#best-practices-to-avoid-throttling"}},[e._v("#")]),e._v(" Best Practices to Avoid Throttling")]),e._v(" "),r("p",[e._v("Programming patterns like continuously polling a resource to check for updates and regularly scanning resource collections to check for new or deleted resources are more likely to lead to applications being throttled and degrade overall performances.")]),e._v(" "),r("p",[e._v("Before any throttling, GraphShield provides two useful headers included in every responses so that you can monitor your own activity level:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("X-RateLimit-Limit")]),e._v(': The limit of requests in a perdiod of time (aka "window")')]),e._v(" "),r("li",[r("code",[e._v("X-RateLimit-Remaining")]),e._v(": The current number of requests that could be made during the current window.")])]),e._v(" "),r("h2",{attrs:{id:"how-to-handle-throttling"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#how-to-handle-throttling"}},[e._v("#")]),e._v(" How to Handle Throttling")]),e._v(" "),r("p",[e._v("The following are best practices for handling throttling:")]),e._v(" "),r("ul",[r("li",[e._v("Reduce the number of operations per request.")]),e._v(" "),r("li",[e._v("Reduce the frequency of calls.")]),e._v(" "),r("li",[e._v("Avoid immediate retries, because all requests accrue against your usage limits.")])]),e._v(" "),r("p",[e._v("When you implement error handling, use the HTTP error code 429 to detect throttling. The failed response includes the "),r("code",[e._v("Retry-After")]),e._v(" response header. Backing off requests using the "),r("code",[e._v("Retry-After")]),e._v(" delay is the fastest way to recover from throttling because GraphShield continues to log resource usage while a client is being throttled.")]),e._v(" "),r("ol",[r("li",[e._v("Wait the number of seconds specified in the "),r("code",[e._v("Retry-After")]),e._v(" header.")]),e._v(" "),r("li",[e._v("Retry the request.")]),e._v(" "),r("li",[e._v("If the request fails again with a 429 error code, you are still being throttled. Continue to use the recommended "),r("code",[e._v("Retry-After")]),e._v(" delay and retry the request until it succeeds.")])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("Rule of Thumb")]),e._v(" "),r("p",[e._v("If no "),r("code",[e._v("Retry-After")]),e._v(" header is provided in the response, we recommend implementing an exponential backoff retry policy.")])]),e._v(" "),r("p",[e._v("In addition to the "),r("code",[e._v("Retry-After")]),e._v(" header, GraphShield includes "),r("code",[e._v("X-RateLimit-Limit")]),e._v(" and "),r("code",[e._v("X-RateLimit-Remaining")]),e._v(" infos in body of the throttled response:")]),e._v(" "),r("div",{staticClass:"language-json line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-json"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[e._v('"message"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Too many requests, please try again later..."')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[e._v('"body"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[e._v('"rateLimitExceeded"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),r("span",{pre:!0,attrs:{class:"token property"}},[e._v('"rateLimitWindow"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("900000")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// In ms")]),e._v("\n      "),r("span",{pre:!0,attrs:{class:"token property"}},[e._v('"ratelimitMax"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("90000")]),e._v("      "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// In # of requests")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br")])]),r("h2",{attrs:{id:"how-graphshield-makes-it-transparent"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#how-graphshield-makes-it-transparent"}},[e._v("#")]),e._v(" How GraphShield makes it transparent?")]),e._v(" "),r("p",[e._v("GraphShield generates its throttling responses using the same schema and headers as the Microsoft Graph, making throttling management transparent for your app. See "),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/graph/throttling",target:"_blank",rel:"noopener noreferrer"}},[e._v("Microsoft Graph throttling guidance"),r("OutboundLink")],1),e._v(" for reference.")])])}),[],!1,null,null,null);t.default=a.exports}}]);